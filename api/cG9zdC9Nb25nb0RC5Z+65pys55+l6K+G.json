{"title":"MongoDB学习笔记","date":"2018-11-09T11:11:17.415Z","slug":"MongoDB基本知识","tags":["database"],"categories":["note"],"updated":"2018-11-09T11:13:18.761Z","content":"<p>##安装<br>官网：<a href=\"https://www.mongodb.com/\" target=\"_blank\" rel=\"noopener\">https://www.mongodb.com/</a></p>\n<p>##基本概念和使用步骤</p>\n<p>###概念<br>数据库（Database）<br>集合（Collection）:相当于关系型数据库的数据表<br>文档（Record）：相当于关系型数据库的记录</p>\n<p>和关系型数据库的不同：每个集合的文档里面的字段可以不同</p>\n<p>###使用</p>\n<p>参考博客 ：<a href=\"https://www.cnblogs.com/ymwangel/p/5859453.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/ymwangel/p/5859453.html</a></p>\n<p>##mongo命令行</p>\n<p>###操作数据库<br><strong>运行数据库</strong> </p>\n<pre><code>$mongo\n</code></pre><p><strong>查看数据库（数据库中有表才会显示出来）</strong></p>\n<pre><code>show dbs \n</code></pre><p><strong>新建/进入数据库</strong></p>\n<pre><code>use 数据库名\n</code></pre><p><strong>系统参数</strong></p>\n<pre><code>db.stats()\n</code></pre><p><strong>删除数据库</strong></p>\n<pre><code>db.dropDatabase()\n</code></pre><p>###操作集合</p>\n<p><strong>新建集合</strong></p>\n<pre><code>db.createCollections(&quot;集合名&quot;)\n</code></pre><p><strong>查询集合</strong></p>\n<pre><code>show collections\n</code></pre><p><strong>修改数据库名</strong></p>\n<pre><code>db.集合名.renameCollection(&quot;新名字&quot;)\n</code></pre><p><strong>删除集合</strong></p>\n<pre><code>db.集合名.drop();\n</code></pre><p>###操作数据文档</p>\n<p><strong>插入记录</strong></p>\n<pre><code>db.集合表名.insert(\n    {\n        &quot;&quot;:&quot;&quot;,\n        &quot;&quot;:&quot;&quot;\n    }\n</code></pre><p><strong>查询记录</strong></p>\n<pre><code>db.集合名.find()\ndb.集合名.findOne()//抽出结果集中的第一条\n</code></pre><p><strong>支持js语法插入文档</strong></p>\n<pre><code>for(var i = 3;i &lt;= 10;i++){\n    db.集合名.insert(\n        &quot;&quot;:&quot;&quot;\n    );\n}\n</code></pre><p><strong>查询集合中文档数量</strong></p>\n<pre><code>db.集合名.count()\n</code></pre><p><strong>删除集合中的文档</strong></p>\n<pre><code>db.集合名.remove({})\n</code></pre><p><strong>排序 sort()</strong></p>\n<pre><code>db.集合名.find({},{}).sort({&quot;字段&quot;:&quot;1&quot;})//字段为1则升序排列，为-1则降序排列\n</code></pre><p><strong>抽出结果集中前n条</strong></p>\n<pre><code>db.集合名.find({},{}).limit(n);\n</code></pre><p><strong>跳过结果集前n条</strong></p>\n<pre><code>db.集合名.find({},{}).skip(n);\n</code></pre><p><strong>更新文档</strong><br>updata(参数一，参数二，参数三)<br>参数一：筛选数据的条件<br>参数二：更新的数据或者字段，若仅更新字段内容需{$set:{“”:””}} 否则更新整个文档内容<br>参数三：更新的范围，默认为第一条 若更新所有符合参数一的文档 参数三为multi:true</p>\n<pre><code>db.集合名.update({&quot;&quot;:&quot;&quot;},{$set{&quot;&quot;:&quot;&quot;}},{ : });\n</code></pre><p><strong>特殊更新</strong></p>\n<p>upsert:有则更新，无则追加</p>\n<pre><code>db.集合名.update({&quot;&quot;:&quot;&quot;},{$set{&quot;&quot;:&quot;&quot;}},{upsert:true});\n</code></pre><p>remove:条件删除数据</p>\n<p>###取出带条件的文档</p>\n<p>####简单条件<br><strong>查询符合条件的文档</strong></p>\n<pre><code>db.集合名.find({&quot;&quot;:&quot;&quot;})\n{}中为检索条件\n\n\n$gte 大于等于\n\n$gt 大于\n\n$lte 小于等于\n\n$lt 小于\n\n$eq 等于\n\n$ne 不等于\n\n正则\n</code></pre><p><strong>查询文档并且分类输出</strong></p>\n<pre><code>db.集合名.distinct(&quot;键值&quot;)\n</code></pre><p>####复杂条件</p>\n<p><strong>与或非</strong></p>\n<pre><code>db.集合名.find({$or:[{...},{...}]});\ndb.集合名.find({&quot;&quot;:{$in:[...]});\ndb.集合名.find({&quot;&quot;:{$exists:true}})\n</code></pre><p>####指定字段</p>\n<pre><code>db.集合名.find({},{字段一: true,字段二: 1})\n</code></pre><p>仅抽出字段一和字段二<br>默认抽出_id字段<br>若不需要（最好不要隐藏） 则加入</p>\n<pre><code>db.集合名.find({},{字段一: true,字段二: 1,_id:0})\n</code></pre><p>##特殊函数</p>\n<pre><code>$inc：递加\n\n$mul：相乘\n\n$rename：改名\n\n$set：新增或者修改\n\n$unset：字段删除\n</code></pre><p>##使用索引</p>\n<p>getIndexes():查询索引（mongo有自带的一个id的索引）<br>createIndex({参数一},{参数二})：增加索引 若参数二为{unique:true} 则表明参数一字段不能重复<br>dropIndex({…})：删除索引</p>\n<p>##备份与恢复</p>\n<p>mongodump：备份<br>mongorestore：恢复</p>\n<p><strong>新建文件夹</strong></p>\n<pre><code>$mkdir 文件夹名\n</code></pre>","next":{"title":"leetcode刷题记录","slug":"leetcode刷题记录"},"link":"http://yoursite.com/post/MongoDB基本知识/","copyright":{"custom":"飞过人间的无常 才懂爱才是宝藏"}}